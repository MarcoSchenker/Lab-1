<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test URL Parameter</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>
    <h1>üîç Test URL Parameter Extraction</h1>
    
    <div class="test-section info">
        <h3>URL Information</h3>
        <p><strong>Current URL:</strong> <span id="currentUrl"></span></p>
        <p><strong>Current Path:</strong> <span id="currentPath"></span></p>
        <p><strong>Expected Format:</strong> /online-game-page/[codigo_sala]</p>
    </div>

    <div class="test-section">
        <h3>Navigation Test</h3>
        <p>Test the URL parameter extraction by navigating to a sample room:</p>
        <button onclick="testNavigation('abc123')">Test with room: abc123</button>
        <button onclick="testNavigation('99b2e1a5')">Test with room: 99b2e1a5</button>
    </div>
    
    <div class="test-section" id="results">
        <h3>Test Results</h3>
        <div id="resultContent">Click a test button to see results...</div>
    </div>

    <script>
        function updateCurrentInfo() {
            document.getElementById('currentUrl').textContent = window.location.href;
            document.getElementById('currentPath').textContent = window.location.pathname;
        }

        function testNavigation(codigoSala) {
            const testUrl = `/online-game-page/${codigoSala}`;
            document.getElementById('resultContent').innerHTML = `
                <p><strong>Testing URL:</strong> ${testUrl}</p>
                <p><strong>Expected codigo_sala:</strong> ${codigoSala}</p>
                <p>Opening in new tab...</p>
            `;
            
            // Open in new tab to test
            window.open(testUrl, '_blank');
        }

        function getRouteParam() {
            const path = window.location.pathname;
            const match = path.match(/\/online-game-page\/(.+)/);
            return match ? match[1] : null;
        }

        function showParamExtraction() {
            const extractedParam = getRouteParam();
            const resultsDiv = document.getElementById('results');
            
            if (extractedParam) {
                resultsDiv.className = 'test-section success';
                resultsDiv.innerHTML = `
                    <h3>‚úÖ Parameter Extraction Successful</h3>
                    <p><strong>Extracted codigo_sala:</strong> ${extractedParam}</p>
                `;
            } else {
                resultsDiv.className = 'test-section error';
                resultsDiv.innerHTML = `
                    <h3>‚ùå Parameter Extraction Failed</h3>
                    <p>Could not extract codigo_sala from URL: ${window.location.pathname}</p>
                `;
            }
        }

        // Update current info on load
        updateCurrentInfo();
        
        // If we're on a game page URL, show extraction results
        if (window.location.pathname.includes('/online-game-page/')) {
            showParamExtraction();
        }
    </script>
</body>
</html>
